(this.webpackJsonpassignment=this.webpackJsonpassignment||[]).push([[0],{56:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var o,n=a(0),r=a(17),s=a.n(r),c=(a(54),a(55),a(56),a(7)),l=a(93),i=a(12),b=a(92),d=a(94),m=a(89),u=a(90),j=a(91),h=a(18),g=["image/jpg","image/jpeg","image/gif","image/png"],O=function(e){var t={};return e.bookName?e.bookName.length>20&&(t.bookName="Not more than 20 characters"):t.bookName="Required",e.bookAuthor?e.bookAuthor.length>15&&(t.bookAuthor="Not more than 15 characters"):t.bookAuthor="Required",e.bookImage?g.includes(e.bookImage.type)?2097152<e.bookImage.size&&(t.bookImage="Only files smaller than 2mb are allowed"):t.bookImage="Supports only jpg, jpeg, gif, png":t.bookImage="Required",t},p=a(1);function f(e){var t=e.toggleAdd,a=e.toggleAddBookModal,o=e.create,r=Object(n.useState)("Choose Image..."),s=Object(c.a)(r,2),l=s[0],i=s[1],b=Object(n.useState)(null),g=Object(c.a)(b,2),f=g[0],x=g[1],v=Object(h.a)({initialValues:{bookName:"",bookAuthor:"",bookImage:""},validate:O,onSubmit:function(e,t){var a=t.resetForm;o(e,{resetForm:a})}}),k=v.values,N=v.errors,y=v.touched,w=v.isSubmitting,A=v.handleChange,I=v.handleBlur,S=v.handleSubmit,B=v.setFieldValue,C=v.resetForm;return Object(p.jsxs)(d.a,{isOpen:t,toggle:a,className:"book-modal",onClosed:function(){C({bookName:"",bookAuthor:"",bookImage:""}),i("Choose Image...")},children:[Object(p.jsx)(m.a,{toggle:a,children:"Add a Book"}),Object(p.jsxs)("form",{onSubmit:S,children:[Object(p.jsxs)(u.a,{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"bookName",children:"Title"}),Object(p.jsx)("input",{type:"text",className:"form-control",name:"bookName",id:"bookName",onChange:A,onBlur:I,value:k.bookName}),N.bookName&&y.bookName&&Object(p.jsx)("span",{className:"error",children:N.bookName})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"bookAuthor",children:"Author"}),Object(p.jsx)("input",{type:"text",className:"form-control",name:"bookAuthor",id:"bookAuthor",onChange:A,onBlur:I,value:k.bookAuthor}),N.bookAuthor&&y.bookAuthor&&Object(p.jsx)("span",{className:"error",children:N.bookAuthor})]}),Object(p.jsxs)("div",{className:"form-group book-image-group",children:[Object(p.jsx)("p",{children:"Image"}),Object(p.jsx)("label",{htmlFor:"bookImage",children:l}),Object(p.jsx)("input",{type:"file",name:"bookImage",id:"bookImage",accept:"image/*",onChange:function(e){B("bookImage",e.target.files[0]),i(e.target.files[0].name),function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){return x([t.result])}}(e.target.files[0])},onBlur:I}),N.bookImage&&y.bookImage&&Object(p.jsx)("span",{className:"error",children:N.bookImage})]}),k.bookImage&&Object(p.jsx)("div",{className:"book-image",children:Object(p.jsx)("img",{src:f,alt:"book-cover",className:"img img-fluid"})})]}),Object(p.jsxs)(j.a,{children:[Object(p.jsx)("button",{type:"submit",disabled:w,className:"btn btn-success",children:w?"Saving...":"Save"}),Object(p.jsx)("button",{onClick:a,className:"btn btn-secondary",children:"Cancel"})]})]})]})}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function k(e,t){var a=e.title,r=e.titleId,s=v(e,["title","titleId"]);return n.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-pencil",viewBox:"0 0 16 16",ref:t,"aria-labelledby":r},s),a?n.createElement("title",{id:r},a):null,o||(o=n.createElement("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"})))}var N,y,w=n.forwardRef(k);a.p;function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function S(e,t){var a=e.title,o=e.titleId,r=I(e,["title","titleId"]);return n.createElement("svg",A({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 16",ref:t,"aria-labelledby":o},r),a?n.createElement("title",{id:o},a):null,N||(N=n.createElement("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"})),y||(y=n.createElement("path",{fillRule:"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})))}var B,C,E=n.forwardRef(S);a.p;function F(e){var t=e.id,a=e.name,o=e.author,n=e.image,r=e.toggleEditBookModal,s=e.deleteBook;return Object(p.jsx)("div",{className:"col-xs-12 col-sm-6 col-md-4 col-lg-3 mb-4",children:Object(p.jsxs)("div",{className:"book card shadow-sm",children:[Object(p.jsx)("img",{src:n,alt:"book-img",className:"card-img-top"}),Object(p.jsx)("div",{className:"card-body",style:{height:"7rem"},children:Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{className:"card-title font-weight-bold",children:a}),Object(p.jsx)("p",{className:"card-subtitle",children:o})]})}),Object(p.jsx)("div",{className:"card-footer",children:Object(p.jsxs)("div",{className:"btn-group",children:[Object(p.jsxs)("button",{className:"btn btn-sm btn-outline-secondary",onClick:function(){return r(t)},children:[Object(p.jsx)(w,{width:"12",height:"12"}),Object(p.jsx)("span",{className:"ml-1",children:"Edit"})]}),Object(p.jsxs)("button",{className:"btn btn-sm btn-outline-danger d-flex align-items-center",onClick:function(){return s()},children:[Object(p.jsx)(E,{width:"12",height:"12"}),Object(p.jsx)("span",{className:"ml-1",children:"Delete"})]})]})})]})})}function R(e){var t=e.toggleEdit,a=e.toggleEditBookModal,o=e.edit,r=e.bookToEdit,s=Object(n.useState)("Choose Image..."),l=Object(c.a)(s,2),i=l[0],b=l[1],g=Object(n.useState)(null),f=Object(c.a)(g,2),x=f[0],v=f[1],k=Object(h.a)({initialValues:{bookName:r?r.name:"",bookAuthor:r?r.author:"",bookImage:r?r.image:""},validate:O,onSubmit:function(e){return o(e)},enableReinitialize:!0}),N=k.values,y=k.errors,w=k.touched,A=k.isSubmitting,I=k.handleChange,S=k.handleBlur,B=k.handleSubmit,C=k.setFieldValue,E=k.dirty;return Object(p.jsxs)(d.a,{isOpen:t,toggle:a,className:"book-modal",children:[Object(p.jsx)(m.a,{toggle:a,children:"Edit Book"}),Object(p.jsxs)("form",{onSubmit:B,children:[Object(p.jsxs)(u.a,{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"bookName",children:"Title"}),Object(p.jsx)("input",{type:"text",className:"form-control",name:"bookName",id:"bookName",onChange:I,onBlur:S,value:N.bookName}),y.bookName&&w.bookName&&Object(p.jsx)("span",{className:"error",children:y.bookName})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"bookAuthor",children:"Author"}),Object(p.jsx)("input",{type:"text",className:"form-control",name:"bookAuthor",id:"bookAuthor",onChange:I,onBlur:S,value:N.bookAuthor}),y.bookAuthor&&w.bookAuthor&&Object(p.jsx)("span",{className:"error",children:y.bookAuthor})]}),Object(p.jsxs)("div",{className:"form-group book-image-group",children:[Object(p.jsx)("p",{children:"Image"}),Object(p.jsx)("label",{htmlFor:"bookImage",children:i}),Object(p.jsx)("input",{type:"file",name:"bookImage",id:"bookImage",accept:"image/*",onChange:function(e){C("bookImage",e.target.files[0]),b(e.target.files[0].name),function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){return v([t.result])}}(e.target.files[0])},onBlur:S}),y.bookImage&&w.bookImage&&Object(p.jsx)("span",{className:"error",children:y.bookImage})]}),Object(p.jsx)("div",{className:"book-image",children:Object(p.jsx)("img",{src:x||N.bookImage,alt:"book-cover",className:"img img-fluid"})})]}),Object(p.jsxs)(j.a,{children:[Object(p.jsx)("button",{type:"submit",disabled:A||!E,className:"btn btn-success",children:A?"Editing...":"Edit"}),Object(p.jsx)("button",{onClick:a,className:"btn btn-secondary",children:"Cancel"})]})]})]})}function V(e){var t=e.loading;e.booksCount;return Object(p.jsx)("footer",{className:"text-muted py-5 ".concat(t?"fixed-bottom":""),children:Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("p",{className:"mb-1 text-center",children:"Books example is \xa9 Rishabh, but please download and customize it for yourself!"})})})}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function L(e,t){var a=e.title,o=e.titleId,r=M(e,["title","titleId"]);return n.createElement("svg",z({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor",className:"bi bi-box-arrow-right",viewBox:"0 0 16 16",ref:t,"aria-labelledby":o},r),a?n.createElement("title",{id:o},a):null,B||(B=n.createElement("path",{fillRule:"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"})),C||(C=n.createElement("path",{fillRule:"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})))}var P=n.forwardRef(L);a.p;function D(e){var t=e.signOut;return Object(p.jsx)("header",{children:Object(p.jsx)("div",{className:"navbar navbar-dark bg-dark shadow-sm",children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsxs)("a",{href:"#!",className:"navbar-brand d-flex align-items-center",children:[Object(p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2","aria-hidden":"true",className:"me-2",viewBox:"0 0 24 24",children:[Object(p.jsx)("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),Object(p.jsx)("circle",{cx:"12",cy:"13",r:"4"})]}),Object(p.jsx)("strong",{className:"pl-2",children:"Books Library"})]}),Object(p.jsx)("div",{className:"sign-out",title:"Sign Out",onClick:function(){return t()},children:Object(p.jsx)(P,{width:"20",height:"20"})})]})})})}function q(e){var t=e.toggleAddBookModal;return Object(p.jsx)("section",{className:"py-3 text-center",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-12 text-center",children:Object(p.jsx)("button",{className:"btn btn-info my-2",onClick:t,children:"Add a Book"})})})})}var H=a(26),T=a.n(H),_=a(46),U=a(47),Z=a.n(U),J=localStorage.getItem("assignment_token"),W="http://assignment.cyberboxer.com",$=function(){var e=Object(_.a)(T.a.mark((function e(t,a,o){var n,r,s=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>3&&void 0!==s[3]?s[3]:{},r={"Content-Type":"multipart/form-data"},o&&(r={"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(J)}),e.next=5,Z.a.request({url:t,method:a,baseURL:W,headers:r,data:n});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a,o){return e.apply(this,arguments)}}();function G(e){var t=e.history,a=Object(n.useState)(!1),o=Object(c.a)(a,2),r=o[0],s=o[1],l=Object(n.useState)(null),d=Object(c.a)(l,2),m=d[0],u=d[1],j=Object(n.useState)(!1),h=Object(c.a)(j,2),g=h[0],O=h[1],x=Object(n.useState)(!1),v=Object(c.a)(x,2),k=v[0],N=v[1],y=Object(n.useState)(null),w=Object(c.a)(y,2),A=w[0],I=w[1],S=function(){s(!0),$("/books/list","get",!0).then((function(e){s(!1),u(e.data.data)})).catch((function(e){s(!1),i.b.error("Some error happened!")}))};Object(n.useEffect)((function(){S()}),[]);var B=function(){O(!g)},C=function(e){N(!k);var t=m.filter((function(t){return t.id===e}))[0];I(t)};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(D,{signOut:function(){localStorage.removeItem("assignment_token"),t.push("/")}}),Object(p.jsxs)("main",{className:"container",children:[Object(p.jsx)(q,{toggleAddBookModal:B}),Object(p.jsx)("div",{className:"row",children:r?Object(p.jsx)("div",{className:"d-flex align-items-center justify-content-center w-100",children:Object(p.jsx)(b.a,{style:{width:"3rem",height:"3rem"}})}):m&&m.map((function(e){return Object(p.jsx)(F,{name:e.name,author:e.author,image:e.image,deleteBook:function(){return function(e){var t=m.filter((function(t){return t.id!==e})),a=new FormData;a.append("id",e),$("/books/delete","post",!0,a).then((function(e){u(t),i.b.success(e.data.message)}))}(e.id)},toggleEditBookModal:function(){return C(e.id)}},e.id)}))})]}),Object(p.jsx)(V,{loading:r}),Object(p.jsx)(f,{toggleAdd:g,toggleAddBookModal:B,create:function(e,t){var a=t.resetForm,o=new FormData;o.append("name",e.bookName),o.append("author",e.bookAuthor),o.append("image",e.bookImage),$("/books/save","post",!0,o).then((function(e){0===e.data.status?(B(),i.b.error(e.data.message),a()):1===e.data.status&&(S(),B(),i.b.success(e.data.message),a())}))}}),Object(p.jsx)(R,{toggleEdit:k,toggleEditBookModal:C,bookToEdit:A,edit:function(e){var t=new FormData;t.append("id",e.id),t.append("name",e.bookName),t.append("author",e.bookAuthor),t.append("image",e.bookImage),$("/books/save","post",!0,t).then((function(e){0===e.data.status?(C(),i.b.error(e.data.message)):1===e.data.status&&(S(),C(),i.b.success(e.data.message))}))}})]})}function K(e){var t=e.history,a=e.setIsAuthenticated,o=Object(h.a)({initialValues:{email:"",password:""},validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.password||(t.password="Required"),t},onSubmit:function(e,o){return function(e,o){var n=o.setSubmitting,r=o.resetForm,s=new FormData;s.append("email",e.email),s.append("password",e.password),$("/auth/login","post",!1,s).then((function(e){return 0===e.data.status?(r(),n(!1),i.b.error(e.data.message)):1===e.data.status?(localStorage.setItem("assignment_token",e.data.data.token),a(!0),t.push("/home"),i.b.success("Logged in successfully!")):void 0}))}(e,{setSubmitting:o.setSubmitting,resetForm:o.resetForm})}}),n=o.values,r=o.errors,s=o.touched,c=o.isSubmitting,l=o.handleChange,b=o.handleBlur,d=o.handleSubmit;return Object(p.jsx)("div",{className:"container vh-100 d-flex align-items-center justify-content-center",children:Object(p.jsxs)("form",{className:"col-xs-12 col-sm-10 col-md-8 col-lg-6 col-xl-4 m-auto",onSubmit:d,noValidate:!0,children:[Object(p.jsx)("h1",{className:"h1 mb-3 text-center font-weight-bold text-uppercase",children:"login"}),Object(p.jsxs)("div",{className:"mb-2",children:[Object(p.jsx)("input",{type:"email",className:"form-control",placeholder:"example@gmail.com",name:"email",onChange:l,onBlur:b,value:n.email}),r.email&&s.email&&Object(p.jsx)("span",{className:"error",children:r.email})]}),Object(p.jsxs)("div",{className:"mb-2",children:[Object(p.jsx)("input",{type:"password",className:"form-control",placeholder:"123456",name:"password",onChange:l,onBlur:b,value:n.password}),r.password&&s.password&&Object(p.jsx)("span",{className:"error",children:r.password})]}),Object(p.jsx)("button",{type:"submit",className:"w-100 btn btn-lg btn-primary",disabled:c,children:"Sign in"})]})})}var Q=a(14),X=Object(Q.a)(),Y=a(23),ee=a(48);function te(e){var t=e.component,a=e.isAuthenticated,o=Object(ee.a)(e,["component","isAuthenticated"]);return Object(p.jsx)(l.b,Object(Y.a)(Object(Y.a)({},o),{},{render:function(e){return a?Object(p.jsx)(t,Object(Y.a)({},e)):Object(p.jsx)(l.a,{to:{pathname:"/",state:{from:e.location}}})}}))}var ae=function(){var e=localStorage.getItem("assignment_token"),t=Object(n.useState)(e&&e.length>0),a=Object(c.a)(t,2),o=a[0],r=a[1];return Object(n.useEffect)((function(){r(!!e)}),[e]),Object(p.jsx)(l.c,{history:X,children:Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{exact:!0,path:"/",children:Object(p.jsx)(K,{history:X,setIsAuthenticated:r})}),Object(p.jsx)(te,{path:"/home",component:G,isAuthenticated:o})]})})},oe=document.getElementById("root");s.a.render(Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(i.a,{autoClose:2e3}),Object(p.jsx)(ae,{})]}),oe)}},[[88,1,2]]]);
//# sourceMappingURL=main.1e8322e8.chunk.js.map